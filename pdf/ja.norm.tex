\documentclass{42-ja}
\newcommand\qdsh{\texttt{42sh}}



%******************************************************************************%
%                                                                              %
%                                 序章                                         %
%                                                                              %
%******************************************************************************%

\begin{document}

% \begin{CJK}{UTF8}{ipxg}

\title{The Norm}
\subtitle{Version 3}

\summary
{
	このドキュメントは、42 における適用規格 (Norm) を説明するものです。 
	プログラミングにおける規格とは、コーディングの際に従うべき一連のルールを
	定義したものです。Norm は Inner Circle 内の C 言語プロジェクトに
	デフォルトで適用され、また、それが明記されているどのプロジェクトにも
	適用されます。
}

\maketitle

\tableofcontents



%******************************************************************************%
%                                                                              %
%                                 はじめに                                     %
%                                                                              %
%******************************************************************************%
\chapter{はじめに}

    Norm は Python で書かれたオープンソースです。\\
	レポジトリはこちらで入手可能です。https://github.com/42School/norminette\\
	プルリクエスト、提案、Issue、いずれも大歓迎です。

%******************************************************************************%
%                                                                              %
%                                The Norm                                      %
%                                                                              %
%******************************************************************************%
\chapter{The Norm}


%******************************************************************************%
%                                   命名規則                                   %
%******************************************************************************%
    \section{命名規則}

        \begin{itemize}

            \item 構造体名の先頭は
                \texttt{s\_} です。

            \item typedef 名の先頭は
                \texttt{t\_} です。

			\item 共用体 (union) 名の先頭は \texttt{u\_} です。

			\item 列挙型 (enum) 名の先頭は \texttt{e\_} です。

            \item グローバル変数名の先頭は \texttt{g\_} です。

            \item 変数名と関数名に使用できるのは、小文字、数字、
				'\_'（アンダースコア）のみです（Unix Case）。

            \item ファイル名とディレクトリ名に使用できるのは、小文字、数字、
				'\_'（アンダースコア）のみです（Unix Case）。

            \item ASCII コード表以外の文字は禁止です。

            \item 変数名、関数名、その他の識別子名は、スネークケースでなくてはなりません。
				大文字は禁止です。単語毎にアンダースコアで区切られていなくてはなりません。

            \item 全ての識別子（関数、マクロ、型、変数等）名は英語でなければなりません。

			\item オブジェクト (変数、関数、マクロ、型、ファイル、ディレクトリ)
				名は、最大限に明示的かつ覚えやすくなければなりません。

            \item 定数（const）、静的（static）変数以外のグローバル変数を
				使用することは禁止であり、Norm Error に該当します。ただし、
				課題で明示的に許可されている場合を除きます。

            \item ファイルはコンパイルが可能でなければなりません。
				コンパイルが不可能なファイルは、Norm の基準に達しているとは
				みなされません。
        \end{itemize}
\newpage

%******************************************************************************%
%                                フォーマット                                  %
%******************************************************************************%
    \section{フォーマット}

            \begin{itemize}

                \item コードはインデント（字下げ）されなければなりません。
					半角スペース（以降、「スペース」と呼ぶ）ではなく、半角文字４つ分の長さのタブを用いること。

                \item 各関数は 25 行以内でなくてはなりません。なお、
					この行数には、関数に伴う波括弧は含まれません。

                \item 各行は 80 文字以内でなくてはなりません。コメントも同様
					です。なお、１つのタブは１文字としてカウントされます。

                \item 各関数は、改行にて区切られていなくてはなりません。
					どのようなコメントやプリプロセッサ命令でも、関数の直前に
					置けます。改行は直前の関数の後に入れてください。

                \item 命令は１行につき１つです。

				\item 空行にスペースやタブがあってはなりません。

				\item 行末にスペースやタブがあってはなりません。

                \item スペースを連続して置いてはなりません。

                \item 新しい行の開始は、各波括弧や制御構造の終端の後で
					なければなりません。

                \item 行末以外では、カンマやセミコロンの直後にスペースが
					続いていなければなりません。

                \item 演算子や被演算子（オペランド）は、スペース１つ
					で区切られていなければなりません。

                \item 各 C 言語のキーワードにはスペースが続いていなければ
					なりません。ただし、型に関するキーワード (int, char,
					float 等) と sizeof は例外です。

                \item スコープ内での変数宣言は、同じ列にインデントされて
					いなくてはなりません。

                \item ポインタに伴うアスタリスク（'*'）は、変数名に隣接していな
					くてはなりません。

                \item 変数の宣言は、１行につき１つです。

                \item 宣言と初期化を同一行内で行ってはなりません。ただし、
					グローバル変数（許可されている場合）、静的（static）変数、
					定数（constant）は例外です。

                \item 宣言は、関数内の先頭で行われなければなりません。

                \item 関数内にて、変数の宣言とその関数の残りの部分の間には、
					空行が１つ挟まれていなくてはなりません。関数内では、他の
					空行は禁止です。

                \item 多重代入は厳禁です。

                \item 命令や制御構造の後に改行を置いても良いですが、括弧や
					代入演算子にインデントを加えなくてはなりません。
					演算子は行頭になくてはなりません。

                \item 制御構造（if, while...）は、括弧を伴っていなくては
					なりません。ただし、制御構造に含まれているのが一行のみ
					の場合や、条件が単一の場合を除きます。

            \end{itemize}

            一般的な例:
            \begin{42ccode}
int             g_global;
typedef struct  s_struct
{
    char    *my_string;
    int     i;
}               t_struct;
struct          s_other_struct;

int     main(void)
{
    int     i;
    char    c;

    return (i);
}
            \end{42ccode}
            \newpage

%******************************************************************************%
%                                    関数                                      %
%******************************************************************************%
    \section{関数}

        \begin{itemize}

            \item 関数に一度に渡せる引数は、４つまでです。

            \item 引数を受け取らない関数は、宣言部分の引数として 'void' と
				明示しなくてはなりません。

            \item 関数のプロトタイプ宣言内の仮引数は、命名されていなくては
				なりません。

            \item 各関数は、空行によって区切られていなくてはなりません。

            \item １つの関数内で宣言できる変数は５つまでです。

            \item 関数内の返り値は、括弧で囲まれていなくてはなりません。

            \item 各関数では、返り値の型と関数名の間にタブが１つ挟まれて
				いなくてはなりません。

            \begin{42ccode}
int my_func(int arg1, char arg2, char *arg3)
{
    return (my_val);
}

int func2(void)
{
    return ;
}
            \end{42ccode}

        \end{itemize}
        \newpage


%******************************************************************************%
%           Typedef、構造体（struct）、 列挙型（enum）、共用体（union）        %
%******************************************************************************%
    \section{Typedef、構造体（struct）、 列挙型（enum）、共用体（union）}

        \begin{itemize}

            \item 構造体、列挙型、共用体の宣言の際は、タブを加えなさい。

            \item 構造体、列挙型、共用体の型の変数を宣言する際は、型にスペース
				を１つ加えなさい。

            \item 構造体、列挙型、共用体を typedef により宣言する際は、
				インデントに関する全てのルールが適用されます。typedef の名前は
				構造体、列挙型、共用体の名前と同じ列に並べられなくては
				なりません。

            \item 全ての構造体名は同じ列にインデントされていなくてはなりません。

            \item .c ファイル内での構造体の宣言は禁止です。

        \end{itemize}
        \newpage


%******************************************************************************%
%                                  ヘッダ                                    %
%******************************************************************************%
    \section{ヘッダ}

        \begin{itemize}

            \item ヘッダファイルへの記載が許可されている要素は、次の通りです。
				ヘッダ（システムによるもの、自作のもの）のインクルード、
				宣言、define、プロトタイプ宣言、マクロ。

            \item インクルードは全て、ファイルの先頭になくてはなりません。

            \item .c ファイルをインクルードしてはなりません。

            \item ヘッダファイルは、二重インクルードが起こらないよう守られて
				いなくてはなりません。仮にファイル名が \texttt{ft\_foo.h} で
				あれば、インクルードガード用のプリプロセッサのシンボル名は
				\texttt{FT\_FOO\_H} となります。

            \item 使用しないヘッダをインクルードしてはいけません。

            \item .h / .c ファイル内のヘッダのインクルードは全て、
				正当性が説明できなくてはなりません。

        \end{itemize}

        \begin{42ccode}
#ifndef FT_HEADER_H
# define FT_HEADER_H
# include <stdlib.h>
# include <stdio.h>
# define FOO "bar"

int     g_variable;
struct  s_struct;

#endif
        \end{42ccode}
        \newpage

%******************************************************************************%
%                             マクロとプリプロセッサ                           %
%******************************************************************************%
    \section{マクロとプリプロセッサ}

        \begin{itemize}

            \item 自作のプリプロセッサ定数 (もしくは \#define) の使用目的は、
				リテラルと定数値に限ります。
            \item \#define について、Norm の回避が目的であるもの、もしくは、
				コードの可読性を下げるものは禁止です。この部分は、人が目で見て
				確認する必要があります。
            \item 標準ライブラリに用意されているマクロは使用可能です。ただし、
				与えられている課題で許可されている範囲内のものに限ります。
            \item 複数行マクロは禁止です。
            \item マクロ名の文字は全て大文字でなくてはなりません。
            \item \#if、\#ifdef、\#ifndef に続く文字は、インデントしなくては
				なりません。
        \end{itemize}
        \newpage


%******************************************************************************%
%                               ！ 禁止事項 ！                                 %
%******************************************************************************%
    \section{! 禁止事項 !}

        \begin{itemize}

            \item 以下のものは使用禁止です。

                \begin{itemize}

                    \item for
                    \item do...while
                    \item switch
                    \item case
                    \item goto

                \end{itemize}

            \item `?' 等の三項（ternary）演算子

            \item 可変長配列（VLA）

            \item 変数宣言時の暗黙の型変換

        \end{itemize}
        \begin{42ccode}
    int main(int argc, char **argv)
    {
        int     i;
        char    string[argc]; // This is a VLA

        i = argc > 5 ? 0 : 1 // Ternary
    }
        \end{42ccode}
        \newpage

%******************************************************************************%
%                                   コメント                                   %
%******************************************************************************%
    \section{コメント}

        \begin{itemize}

            \item 関数内にはコメントできません。コメントは、行末、もしくは
				コメント専用の行になければなりません。

            \item コメントは英語でなくてはなりません。また、それらは有用で
				なくてはなりません。

            \item コメントのおかげでろくでもない関数が正当化されるようなことは
				ありません。

        \end{itemize}
        \newpage


%******************************************************************************%
%                                   ファイル                                   %
%******************************************************************************%
    \section{ファイル}

        \begin{itemize}

            \item .c ファイルをインクルードしてはいけません。

            \item １つの .c ファイル内で定義できる関数は５つまでです。

        \end{itemize}
        \newpage


%******************************************************************************%
%                                   Makefile                                   %
%******************************************************************************%
    \section{Makefile}

            Makefile は、norminette コマンドではチェックされません。レビュー中
			に、生徒が中身を見てチェックしなければなりません。
            \begin{itemize}

                \item 以下のルールは必須です。\$(NAME), clean, fclean, re, all

                \item Makefile が relink を引き起こす場合、そのプロジェクトは
					機能要件を満たしていないとみなされます。

                \item マルチバイナリのプロジェクトの場合、上述のルールに加え、
					バイナリをコンパイルするルールも、コンパイルされた各
					バイナリへの具体的なルールと同様に存在しなければなりません。

                  \item システムによるものではないライブラリ（例: Libft）の
					  関数を使用するプロジェクトの場合、Makefile はこの
					  ライブラリを自動的にコンパイルしなくてはなりません。

                  \item プロジェクト内でコンパイルされる必要があるソース
					  ファイルは全て、そのファイル名が Makefile に明記されて
					  いなければなりません。

            \end{itemize}



\end{document}
%******************************************************************************%
