\documentclass{42-ru}

%******************************************************************************%
%                                                                              %
%                               Prologue                                       %
%                                                                              %
%******************************************************************************%

\begin{document}
\title{Норма}
\subtitle{Версия 3}

\summary
{
    Данный документ описывает Норму (Norme) - действующий в школе 42 стандарт написания кода.
    Норма по умолчанию применяется ко всем проектам на Си, а также к любому проекту где это указано.
}

\maketitle

\tableofcontents

%******************************************************************************%
%                                                                              %
%                                 Foreword                                     %
%                                                                              %
%******************************************************************************%

\chapter{Предисловие}

    \texttt{norminette} - проект с открытым исходным кодом (Python v3). \\
    Репозиторий доступен по https://github.com/42School/norminette. \\
    Предложения, изменения и любой положительный вклад в проект приветствуются!

    \newpage

%******************************************************************************%
%                                                                              %
%                                   Pedago explanations                        %
%                                                                              %
%******************************************************************************%

\chapter{Зачем ?}

    Норма тщательно разрабатовалась для восполнения педагогических нужд.
    Далее приводятся наиболее важные причины в пользу сделанного выбора:
    \begin{itemize}

        \item Последовательность: программирование подразумевает разбиение больших и сложных задач
            на ряд более простых инструкций. Все эти инструкции исполняются последовательно:
            одна за другой. Начинающему, во время создания программного обеспечения (ПО), необходима
            простая и ясная архитектура проекта, равно как и полное понимание отдельных инструкций и
            точности порядка их выполнения. Озадачивающие синтаксисы языка, делающие много инструкций
            в одно и то же время довольно запутывают. Функции, пытающиеся обращаться к многим задачам,
            замешанными в одном и том же коде, служат причиной ошибок.\\
            Норма просит вас создавать простые кусочки кода, где каждая единичная задача может быть
            ясным образом понята и проверена, где последовательность всех исполняемых инструкций
            не оставляет сомнений. Вот поэтому мы и просим писать не более 25 строк кода в функциях,
            а также почему \texttt{for}, \texttt{do .. while}, или тернарники запрещены.

        \item "Увидь и ощути": во время обучения, обмениваясь мыслями и наработками с друзьями,
            соучениками, а также во время оцениваний проектов, вы наверное не хотите тратить время
            на декодирование кода, а сразу приступить к делу и разговорам по существу.\\
            Норма и сподвигает вас на использование особого "взгляни-и-ощути" (look and feel),
            давая наставления по именованию переменных и функций, постановке отступов (индентации),
            где и когда ставить скобки, пробелы, табуляцию и так далее.
            Это позволит вам бегло и плавно смотреть на чужой код, выглядящий знакомым, и сразу перейти
            к сути без растраты времени на чтение кода для того, чтобы его понять.
            Норма - своего рода товарный знак. Как часть сообщества 42, вы сможете распознать код,
            написанный другим учащимся школы 42 или её выпускника, когда вы будете на бирже труда.
    
        \item Долгосрочное видение: лучший способ писать поддерживаемый код состоит в написание понятного кода.
            Всякий раз, когда кому угодно, включая и вас, когда нужно исправить ошибку или добавить новый функционал,
            не придётся тратить драгоценное время, пробираясь через дебри кода и выясняя что всё это значит,
            является свидетельством, что вы придерживаетесь правильного пути. Это помогает избежать обстоятельств,
            в которых код перестаёт поддерживаться просто потому что его поддержка проедает время и силы.
            Здесь и кроется там разница, отличающая успешные коммерческие продукты от неуспешных.
            Чем скорее вы это поймёте, тем лучше для вас же.

        \item Отсылки: вы можете подумать, что все или некоторые правила Нормы являются чем-то произвольным.
            Но нет, мы вообще-то думали и читали о том, что и как делать. Мы настоятельно советуем разобраться
            во всём самостоятельно почему функции должны быть краткими и делать лишь одну вещь (но хорошо);
            почему имена переменных должны нести смысл; почему строки не должны быть шире 80 столбцов;
            почему функция не должна принимать чуть более, чем слишком много параметров; почему
            комментариям/пояснениям хорошо быть полезными и так далее, и далее, и ещё раз далее.

    \end{itemize}

    \newpage

%******************************************************************************%
%                                                                              %
%                                The Norm                                      %
%                                                                              %
%******************************************************************************%

\chapter{Норма}

%******************************************************************************%
%                             Naming conventions                               %
%******************************************************************************%

    \section{Именование}

        \begin{itemize}

            \item Имя структуры (\texttt{struct}) должно начинаться с \texttt{s\_}.

            \item Имя определяемого типа (\texttt{typedef}) должно начинаться с \texttt{t\_}.

            \item Имя объединения (\texttt{union}) должно начинаться с \texttt{u\_}.

            \item Имя перечисления (\texttt{enum}) должно начинаться с \texttt{e\_}.

            \item Имя глобальной переменной должно начинаться с \texttt{g\_}.

            \item Имена переменных и функций должны состоять только из букв нижнего регистра, цифр и знаков нижнего подчёркивания '\_' (UNIX Case).

            \item Имена файлов и директорий должны состоять только из букв нижнего регистра, цифр и знаков нижнего подчёркивания '\_' (UNIX Case).

            \item Символы, не являющиеся частью стандарта ASCII, запрещены.

            \item Переменные, функции, идентификаторы должны быть в "змеином" регистре (snake case): буквы в нижнем регистре и нижние подчёркивания как разделители.

            \item Все идентификаторы (функции, макросы, типы, переменные, и т.д.) должны быть на английском.

            \item Объекты (переменные, функции, макросы, типы, файлы или директории) должны иметь осмысленные и запоминающиеся имена насколько это возможно.

            \item Объявления глобальных переменных, не обозначенных как \texttt{const} или \texttt{static}, запрещены. Это считается ошибкой Нормы, только если проект явно не разрешает обратное.

            \item Файл должен компилироваться, иначе он не проходит Норму.

        \end{itemize}

    \newpage

%******************************************************************************%
%                                 Formatting                                   %
%******************************************************************************%

    \section{Форматирование}

            \begin{itemize}

                \item Вы обязаны делать отступы/индентацию табуляцией в 4 пробела. Это не то же самое, что 4 обычных пробела.

                \item Каждая функция (её тело) не должна превышать 25 строк, не считая её фигурные скобки.

                \item Каждая строка не превышает 80 столбцов, включая комментарии. Внимание: табуляция не считается за столбец, но как число пробелов, которые она представляет.

                \item Каждая функция должна быть отделена следующей за ней новой строкой. Комментарий или директива препроцессора может располагаться прямо (вплотную) над функцией.

                \item Одна инструкция на строку.

                \item Пустая строка должна быть пустой: ни пробелов, ни табуляций.

                \item Строка никогда не завершается пробелами или табуляцией.

                \item Вы не можете допускать два (и более) последовательных пробела.

                \item После каждой фигурной скобки или управляющей структуры (\texttt{if}, \texttt{while}, ...) должна идти новая строка.

                \item Если это не конец строки, каждая запятая или точка-с-запятой должна "следоваться" пробелом.

                \item Каждый оператор или операнд должен отделяться лишь одним пробелом.

                \item Каждое ключевое слово языка Си должно "следоваться" пробелом, за исключением: 1) ключевых слов для типов (\texttt{int}, \texttt{char}, \texttt{float}, и т.д.); 2) оператора \texttt{sizeof}.

                \item Каждое объявление переменной должно "отступаться"/индентироваться к одному и тому же столбцу в пределах их области видимости.

                \item Звёздочка, относящаяся к переменной-указателю, должна "склеиваться" с именем этой переменной.

                \item На одной строке может быть объявлена лишь одна переменная.

                \item Объявление и инициализация на одной строке невозможны, за исключением: 1) глобальных переменных (когда позволены); 2) статических переменных; 3) постоянных (констант).

                \item Объявления в функции должны располагаться в её начале.

                \item В функции, объявления переменных отделяются пустой строкой от остальной части функции. Нигде более пустые строки в функции не допускаются.

                \item Множественные присваивания строго запрещены.

                \item Вы можете перейти на новую строку после инструкции или управляющей структуры may add a new line after an instruction or
                  control structure, but you'll have to add an
                  indentation with brackets or assignment operator.
                  Operators must be at the beginning of a line.

                \item Управляющие структуры должны иметь фигурные скобки, только если они не состоят из одной строки.

                \item Фигурные скобки после функций, деклараторов или управляющих конструкций должны располагаться на отдельных строках.

            \end{itemize}

    \newpage

            Пример:
            \begin{42ccode}
int             g_global;
typedef struct  s_struct
{
    char    *my_string;
    int     i;
}               t_struct;
struct          s_other_struct;

int     main(void)
{
    int     i;
    char    c;

    return (i);
}
            \end{42ccode}

    \newpage

%******************************************************************************%
%                              Function parameters                             %
%******************************************************************************%

    \section{Функции}

        \begin{itemize}

            \item Функция может принимать вплоть до 4 именнованных параметров.

            \item Функция, не принимающая параметров, должна явно принимать \texttt{void} в качестве аргумента. 

            \item Параметры в прототипах функций должны быть именованными.

            \item Функции отделяются друг от друга пустой строкой.

            \item В функции не может быть объявлено более 5 переменных.

            \item Возвращаемое значение, если имеется, должно быть заключено в скобки. 

            \item Между вовращаемым типом функции и её именем должна быть одна табуляция.

            \begin{42ccode}
int my_func(int arg1, char arg2, char *arg3)
{
    return (my_val);
}

int func2(void)
{
    return ;
}
            \end{42ccode}

        \end{itemize}

    \newpage

%******************************************************************************%
%                        Typedef, struct, enum and union                       %
%******************************************************************************%

    \section{Typedef, struct, enum и union}

        \begin{itemize}

            \item Вы должны добавить табуляцию при объявлении структуры (\texttt{struct}), перечисления (\texttt{enum}) или объединения (\texttt{union}).

            \item Объявляя \texttt{struct}, \texttt{enum} или \texttt{union}, достаточное одного пробела в типе.

            \item Правила отступов/индентации при объявлении (\texttt{typedef}) структур, объединений или перечислений должны соблюдаться.

            \item Имени типа, определяемого \texttt{typedef}, должна предшествовать один знак табуляции.

            \item Отступы для всех имён структур должны быть на одном и том же столбце их области видимости.

            \item Структуры не могут быть объявлены в \texttt{.c} файле.

        \end{itemize}

    \newpage

%******************************************************************************%
%                                   Headers                                    %
%******************************************************************************%

    \section{Заголовочные файлы}

        \begin{itemize}

            \item В заголовочных \texttt{.h} файлах разрешаются: включения (\texttt{#include}), объявления, определения (\texttt{#define}), прототипы и макросы.

            \item Все включения должны быть в начале заголовочного файла.

            \item Нельзя "подключать" С файлы.

            \item Заголовочные файлы должны быть защищены от двойных включений. Если файл называется \texttt{ft\_foo.h}, его защищающий макрос - \texttt{FT\_FOO\_H}.

            \item Неиспользуемые заголовочные включения (\texttt{.h}) возбраняются.

            \item Все заголовочные включения в \texttt{.c} или \texttt{.h} файлах должны быть оправданными.

        \end{itemize}

        \begin{42ccode}
#ifndef FT_HEADER_H
# define FT_HEADER_H
# include <stdlib.h>
# include <stdio.h>
# define FOO "bar"

int		g_variable;
struct	s_struct;

#endif
        \end{42ccode}

    \newpage

%******************************************************************************%
%                                 The 42 header                                %
%******************************************************************************%

   \section{Заголовок 42 - "стильное" начало файла}

        \begin{itemize}

        \item Каждый \texttt{.c}  и \texttt{.h}  файл должен непосредственно начинаться со стандартного заголовака 42:
            многострочного комментария особого формата, включающего полезные сведения.
            Стандартный заголовок доступен на компьютерах в кластерах школы для различных
            тестовых редакторов: emacs (\texttt{C-c C-h}), vim (\texttt{:Stdheader} или \texttt{F1}) и т.д.

        \item Заголовок 42 должен содержать: 1) логин и электронную почту создателя файла;
            2) дату и время создания файла, а также логин человека, создавшего его;
            3) дату и время обновления файла, а также логин человека, обновившего его.
            При всяком сохранении файла, сведения должны обновляться автоматически.

        \end{itemize}

    \newpage

%******************************************************************************%
%                           Macros and Pre-processors                          %
%******************************************************************************%

    \section{Макросы и Препроцессинг}

        \begin{itemize}

            \item Постоянные препроцессора (\texttt{#define}), которые вы создаёте, должны использоваться только для постоянных и литеральных значений.

            \item Все \texttt{#define} определения, созданные для обхода или обмана Нормы запрещены. Эта часть должна проверяться людьми.

            \item Вы можете пользоваться макросами из стандартной библиотеки только если они разрешены в проекте.

            \item Многострочные макросы не допускаются.

            \item Имена макросов записываются только в верхнем регистре.

            \item Il faut indenter les caractères qui suivent un \texttt{\#if}, \texttt{\#ifdef} или \texttt{\#ifndef}.

        \end{itemize}

    \newpage

%******************************************************************************%
%                              Forbidden stuff!                                %
%******************************************************************************%

    \section{Запретные вещи}

        \begin{itemize}

            \item Вам не разрешается использовать:

                \begin{itemize}

                    \item \texttt{for}
                    \item \texttt{do...while}
                    \item \texttt{switch}
                    \item \texttt{case}
                    \item \texttt{goto}

                \end{itemize}

            \item Трёхместные (тернарные) операторы вроде \texttt{?}.

            \item VLA - Variable Length Arrays - массивы переменной длины.

            \item Неявные типы в объявлениях переменных.

        \end{itemize}
        \begin{42ccode}
    int main(int argc, char **argv)
    {
        int     i;
        char    string[argc]; // This is a VLA

        i = argc > 5 ? 0 : 1 // Ternary
    }
        \end{42ccode}

    \newpage

%******************************************************************************%
%                                   Comments                                   %
%******************************************************************************%

    \section{Комментарии}

        \begin{itemize}

            \item Комментарии не могут находиться в телах функций.

            \item Комментарий должен быть в конце строки или на отдельной строке.

            \item Комментарии пишутся только на английском языке.

            \item Комментарий не может оправдать "ублюдочную" функцию.

        \end{itemize}

    \newpage

%******************************************************************************%
%                                    Files                                     %
%******************************************************************************%

    \section{Файлы}

        \begin{itemize}

            \item Не допускается включать \texttt{.c} файлы в \texttt{.c} файлы.

            \item В \texttt{.c} файле не может быть определено более 5 функций.

        \end{itemize}

    \newpage

%******************************************************************************%
%                                   Makefile                                   %
%******************************************************************************%

    \section{Make файлы}

            Make файлы проверяются не Нормой, а учащимися во время оценки проекта.
            \begin{itemize}

                \item Правила \$(NAME), clean, fclean, re и all обязательны.

                \item Если Make файл пересобирается (relinks), проект считается неработающим.

                \item В случае проекта с множеством бинарных файлов (бинарников), в дополнение к вышеуказанным правилам, необходимо определить правила, компилирующие бинарники как в отдельности, так и в совокупности.

                \item Если проект полагается на функцию из несистемной библиотеки, например, \texttt{libft}, ваш Make файл должен компилировать библиотеку автоматически.

                \item Все исходные файлы, требующиеся для компиляции проекта, должны быть явно обозначены в вашем Make файле.

            \end{itemize}

\end{document}

%******************************************************************************%
%                                    EOF                                       %
%******************************************************************************%
